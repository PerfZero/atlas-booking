# Inc

Переработанная архитектура темы WordPress. Вспомогательные функции вынесены из `functions.php`.

## Структура

### helpers/
Вспомогательные функции (работают ✅):
- `date-formatter.php` - форматирование дат на русском
- `validators.php` - валидация данных
- `admin-scripts.php` - JS скрипты для админки WordPress

## Результаты

### ✅ Выполнено

**Helpers:**
- Удалено: 278 строк дублированного кода
- Создано: 3 модуля
- Сокращение: 6.3%

**Итого:**
- Было: 4437 строк в functions.php
- Стало: 4159 строк в functions.php
- Удалено: 278 строк

### ⚠️ Почему не разделили Admin

Попытка вынести административные функции в отдельные файлы вызвала ошибку:
```
Translation loading for the acf domain was triggered too early
```

**Проблема:** Файлы с `add_action()` загружались через `require_once` до полной инициализации WordPress.

**Решение:** Админ функции остались в `functions.php`, так как требуют особого порядка загрузки.

## Рекомендации по дальнейшей архитектуре

Для правильного разделения кода нужно:

1. **Использовать autoloader** или загружать модули внутри хуков
2. **Создать класс-контроллер** который инициализирует модули в правильное время
3. **Разделить models** (hotel, transfer, flight, tour) - они безопасны, так как содержат только функции без хуков

## Подключение

В `functions.php`:

```php
require_once get_template_directory() . '/inc/helpers/date-formatter.php';
require_once get_template_directory() . '/inc/helpers/validators.php';
require_once get_template_directory() . '/inc/helpers/admin-scripts.php';
```

## Преимущества текущей структуры

1. **Helpers вынесены** - переиспользуемые функции изолированы
2. **Код чище** - меньше дублирования дат/валидации
3. **Безопасно** - не ломает WordPress инициализацию
